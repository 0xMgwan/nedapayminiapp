"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5746],{95746:(e,r,t)=>{t.d(r,{cv:()=>i,getProvider:()=>p});var o=t(47004),n=t(87358);let a=["https://1rpc.io/base"],c=[{url:n.env.NEXT_PUBLIC_COINBASE_BASE_RPC||"https://api.developer.coinbase.com/rpc/v1/base/n4RnEAzBQtErAI53dP6DCa6l6HRGODgV",priority:0,name:"CoinbaseCDP"},{url:"https://base-rpc.publicnode.com/",priority:1,name:"PublicNode"},{url:"https://base.llamarpc.com",priority:2,name:"LlamaRPC"},{url:"https://1rpc.io/base",priority:3,name:"1RPC"},{url:"https://base-mainnet.g.alchemy.com/v2/demo",priority:4,name:"Alchemy"},{url:"https://mainnet.base.org",priority:5,name:"Base Mainnet"},{url:"https://base.drpc.org",priority:6,name:"DRPC"},{url:"https://rpc.ankr.com/base",priority:7,name:"Ankr"}],i=async()=>{for(let e of c.filter(e=>!a.includes(e.url)).sort((e,r)=>e.priority-r.priority))try{console.log("[LOGS] Trying RPC endpoint: ".concat(e.name));let r=u(e.url);if(await s(r))return console.log("[LOGS] Successfully connected to: ".concat(e.name)),r}catch(r){console.error("[LOGS] Failed to connect to ".concat(e.name,":"),r)}throw Error("No compatible RPC endpoints available for log/event queries.")},l=null,s=async function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e4;try{let t=new Promise((e,t)=>{setTimeout(()=>t(Error("Provider health check timeout")),r)}),o=e.getBlockNumber(),n=await Promise.race([o,t]);return"number"==typeof n&&n>0}catch(e){return console.error("Provider health check failed:",e),!1}},u=e=>{let r=new o.F(e),t=r.send.bind(r);return r.send=async(e,r)=>{try{let o=new Promise((e,r)=>{setTimeout(()=>r(Error("RPC request timeout")),1e4)}),n=t(e,r);return await Promise.race([n,o])}catch(r){throw console.error("RPC request failed for method ".concat(e,":"),r),r}},r},p=async()=>{if(l){let{provider:e,timestamp:r,endpoint:t,failCount:o}=l;if(Date.now()-r<3e5&&o<3)try{if(await s(e))return console.log("Using cached provider: ".concat(t)),e;l.failCount++}catch(e){console.warn("Cached provider failed health check, trying alternatives"),l.failCount++}}for(let e of[...c].sort((e,r)=>e.priority-r.priority).sort(()=>Math.random()>.3?1:-1))try{console.log("Trying RPC endpoint: ".concat(e.name));let r=u(e.url);if(await s(r))return console.log("Successfully connected to: ".concat(e.name)),l={provider:r,timestamp:Date.now(),endpoint:e.url,failCount:0},r}catch(r){console.error("Failed to connect to ".concat(e.name,":"),r)}throw Error("Network connection issues. Please check your internet connection and try again later.")}}}]);