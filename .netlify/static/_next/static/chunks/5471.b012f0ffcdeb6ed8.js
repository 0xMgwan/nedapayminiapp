"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5471,5746],{25471:(e,t,r)=>{r.d(t,{paginatedQueryFilter:()=>n});var o=r(95746);async function n(e,t,r,n){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1e3,c=[],i=r,l=await (0,o.cv)(),s=e.connect(l);for(;i<=n;){let e=Math.min(i+a-1,n);try{let r=await s.queryFilter(t,i,e);c=c.concat(r)}catch(t){throw Error("queryFilter failed for block range ".concat(i,"-").concat(e,": ").concat(t))}i=e+1}return c}},95746:(e,t,r)=>{r.d(t,{cv:()=>i,getProvider:()=>p});var o=r(47004),n=r(87358);let a=["https://1rpc.io/base"],c=[{url:n.env.NEXT_PUBLIC_COINBASE_BASE_RPC||"https://api.developer.coinbase.com/rpc/v1/base/n4RnEAzBQtErAI53dP6DCa6l6HRGODgV",priority:0,name:"CoinbaseCDP"},{url:"https://base-rpc.publicnode.com/",priority:1,name:"PublicNode"},{url:"https://base.llamarpc.com",priority:2,name:"LlamaRPC"},{url:"https://1rpc.io/base",priority:3,name:"1RPC"},{url:"https://base-mainnet.g.alchemy.com/v2/demo",priority:4,name:"Alchemy"},{url:"https://mainnet.base.org",priority:5,name:"Base Mainnet"},{url:"https://base.drpc.org",priority:6,name:"DRPC"},{url:"https://rpc.ankr.com/base",priority:7,name:"Ankr"}],i=async()=>{for(let e of c.filter(e=>!a.includes(e.url)).sort((e,t)=>e.priority-t.priority))try{console.log("[LOGS] Trying RPC endpoint: ".concat(e.name));let t=u(e.url);if(await s(t))return console.log("[LOGS] Successfully connected to: ".concat(e.name)),t}catch(t){console.error("[LOGS] Failed to connect to ".concat(e.name,":"),t)}throw Error("No compatible RPC endpoints available for log/event queries.")},l=null,s=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e4;try{let r=new Promise((e,r)=>{setTimeout(()=>r(Error("Provider health check timeout")),t)}),o=e.getBlockNumber(),n=await Promise.race([o,r]);return"number"==typeof n&&n>0}catch(e){return console.error("Provider health check failed:",e),!1}},u=e=>{let t=new o.F(e),r=t.send.bind(t);return t.send=async(e,t)=>{try{let o=new Promise((e,t)=>{setTimeout(()=>t(Error("RPC request timeout")),1e4)}),n=r(e,t);return await Promise.race([n,o])}catch(t){throw console.error("RPC request failed for method ".concat(e,":"),t),t}},t},p=async()=>{if(l){let{provider:e,timestamp:t,endpoint:r,failCount:o}=l;if(Date.now()-t<3e5&&o<3)try{if(await s(e))return console.log("Using cached provider: ".concat(r)),e;l.failCount++}catch(e){console.warn("Cached provider failed health check, trying alternatives"),l.failCount++}}for(let e of[...c].sort((e,t)=>e.priority-t.priority).sort(()=>Math.random()>.3?1:-1))try{console.log("Trying RPC endpoint: ".concat(e.name));let t=u(e.url);if(await s(t))return console.log("Successfully connected to: ".concat(e.name)),l={provider:t,timestamp:Date.now(),endpoint:e.url,failCount:0},t}catch(t){console.error("Failed to connect to ".concat(e.name,":"),t)}throw Error("Network connection issues. Please check your internet connection and try again later.")}}}]);