"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1026],{31026:(e,a,t)=>{t.d(a,{offchainLookup:()=>k,offchainLookupSignature:()=>m});var s=t(81946),n=t(79183),r=t(7441),o=t(41514);class c extends r.C{constructor({callbackSelector:e,cause:a,data:t,extraData:s,sender:n,urls:r}){var c;super(a.shortMessage||"An error occurred while fetching for an offchain result.",{cause:a,metaMessages:[...a.metaMessages||[],(null==(c=a.metaMessages)?void 0:c.length)?"":[],"Offchain Gateway Call:",r&&["  Gateway URL(s):",...r.map(e=>"    ".concat((0,o.I)(e)))],"  Sender: ".concat(n),"  Data: ".concat(t),"  Callback selector: ".concat(e),"  Extra data: ".concat(s)].flat(),name:"OffchainLookupError"})}}class i extends r.C{constructor({result:e,url:a}){super("Offchain gateway response is malformed. Response data must be a hex value.",{metaMessages:["Gateway URL: ".concat((0,o.I)(a)),"Response: ".concat((0,n.A)(e))],name:"OffchainLookupResponseMalformedError"})}}class d extends r.C{constructor({sender:e,to:a}){super("Reverted sender address does not match target contract address (`to`).",{metaMessages:["Contract address: ".concat(a),"OffchainLookup sender address: ".concat(e)],name:"OffchainLookupSenderMismatchError"})}}var u=t(90557),l=t(47826),f=t(13423),p=t(17255),h=t(79731),y=t(32840),w=t(95041);let m="0x556f1830",g={name:"OffchainLookup",type:"error",inputs:[{name:"sender",type:"address"},{name:"urls",type:"string[]"},{name:"callData",type:"bytes"},{name:"callbackFunction",type:"bytes4"},{name:"extraData",type:"bytes"}]};async function k(e,a){let{blockNumber:t,blockTag:n,data:r,to:o}=a,{args:i}=(0,l.W)({data:r,abi:[g]}),[u,y,m,k,b]=i,{ccipRead:v}=e,O=v&&"function"==typeof(null==v?void 0:v.request)?v.request:C;try{if(!(0,p.h)(o,u))throw new d({sender:u,to:o});let a=y.includes(w.J)?await (0,w.X)({data:m,ccipRequest:O}):await O({data:m,sender:u,urls:y}),{data:r}=await (0,s.T)(e,{blockNumber:t,blockTag:n,data:(0,h.xW)([k,(0,f.h)([{type:"bytes"},{type:"bytes"}],[a,b])]),to:o});return r}catch(e){throw new c({callbackSelector:k,cause:e,data:r,extraData:b,sender:u,urls:y})}}async function C(e){let{data:a,sender:t,urls:s}=e,r=Error("An unknown error occurred.");for(let e=0;e<s.length;e++){let c=s[e],d=c.includes("{data}")?"GET":"POST",l="POST"===d?{data:a,sender:t}:void 0,f="POST"===d?{"Content-Type":"application/json"}:{};try{var o;let e,s=await fetch(c.replace("{sender}",t.toLowerCase()).replace("{data}",a),{body:JSON.stringify(l),headers:f,method:d});if(e=(null==(o=s.headers.get("Content-Type"))?void 0:o.startsWith("application/json"))?(await s.json()).data:await s.text(),!s.ok){r=new u.Ci({body:l,details:(null==e?void 0:e.error)?(0,n.A)(e.error):s.statusText,headers:s.headers,status:s.status,url:c});continue}if(!(0,y.q)(e)){r=new i({result:e,url:c});continue}return e}catch(e){r=new u.Ci({body:l,details:e.message,url:c})}}throw r}}}]);